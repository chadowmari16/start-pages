!function(e){e.fn.FeedEk=function(t){var a,i=e.extend({MaxCount:5,ShowDesc:!0,ShowPubDate:!0,DescCharacterLimit:0,TitleLinkTarget:"_blank",DateFormat:"",DateFormatLang:"en"},t),n=e(this).attr("id"),r="";if(e("#"+n).empty(),void 0!=i.FeedUrl){var s='SELECT channel.item FROM feednormalizer WHERE output="rss_2.0" AND url ="'+i.FeedUrl+'" LIMIT '+i.MaxCount;e.ajax({url:"https://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(s)+"&format=json&diagnostics=false&callback=?",dataType:"json",success:function(t){e("#"+n).empty(),t.query.results.rss instanceof Array||(t.query.results.rss=[t.query.results.rss]),e.each(t.query.results.rss,function(t,n){if(r+='<li><div class="itemTitle"><a href="'+n.channel.item.link+'" target="'+i.TitleLinkTarget+'" >'+n.channel.item.title+"</a></div>",i.ShowPubDate){if(a=new Date(n.channel.item.pubDate),r+='<div class="itemDate">',e.trim(i.DateFormat).length>0)try{moment.lang(i.DateFormatLang),r+=moment(a).format(i.DateFormat)}catch(t){r+=a.toLocaleDateString()}else r+=a.toLocaleDateString();r+="</div>"}i.ShowDesc&&(r+='<div class="itemContent">',r+=i.DescCharacterLimit>0&&n.channel.item.description.length>i.DescCharacterLimit?n.channel.item.description.substring(0,i.DescCharacterLimit)+"...":n.channel.item.description,r+="</div>")}),e("#"+n).append('<ul class="feedEkList">'+r+"</ul>")}})}}}(jQuery);
